<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agroculture | Community Forum</title>

    <link rel="apple-touch-icon" sizes="180x180" href="./images/agroculture.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./images/agroculture.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./images/agroculture.png">
    <link rel="manifest" href="/site.webmanifest">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="community forum.css">
    <script src="horti.js"></script>
    <script src="language.js"></script>

    <!-- <script>
        // Check if the user is authenticated
        const user = JSON.parse(sessionStorage.getItem('user'));
        if (user) {
          // User is authenticated
          displayUserInfo(user);
        } else {
          // Redirect to the login page if the user is not authenticated
          window.location.href = "login.html";
        }
    </script> -->
</head>

<body>

    <div class="pager">
        <nav class="navbar navbar-expand-lg navbar-light ">
            <div class="navigation container-fluid">

                <img src="./images/agro_g.png" style="width:150px" class="kayybites_logo d-inline-block align-top"
                    alt="Logo">

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="flora.html">Flora</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="weather forecast.html">Weather Forecast</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="#"><b>Community Forum</b></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="support.html">Feedback</a>
                        </li>

                    </ul>
                    <div class="navbar-svg" style="border-radius: 20px;">
                        <a href="contact.html" type="button" class="btn btn-outline-success mr-2" id="myBtn">
                          <i class="bi bi-person-circle" title="Dashboard" style="font-size: 20px"></i>
                        </a>
                        <i class="btn btn-dark bi bi-moon" style="color: rgb(183, 155, 63); font-size: 20px; margin-right: 10px;"
                          id="dark-mode-toggle"></i>
            
                        <a href="" type="button" class="btn btn-outline-info mr-2"><i class="bi bi-instagram instagram"
                            style="font-size: 20px"></i></a>
                        <a href="" type="button" class="btn btn-outline-primary mr-2"><i class="bi bi-twitter twitter"
                            style="font-size: 20px"></i></a>
                        <a href="" type="button" class="btn btn-outline-success mr-2"><i class="bi bi-facebook facebook"
                            style="font-size: 20px"></i></a>
                        <a href="login.html" data-toggle="tooltip" title="Logout!" type="button"
                          class="btn btn-outline-danger mr-2"><i class="bi bi-box-arrow-right logout"
                            style="font-size: 20px"></i></a>
                      </div>
                </div>
            </div>
        </nav>

        <!-- Forum Content -->
        <div class="container forum-container mt-5">
            <h2 style="padding-top: 50px;">My Timeline</h2>

            <!-- Announcement Section -->
            <div class="announcement-section">
                <h4>Announcements</h4>
                <div class="alert alert-info" role="alert">
                    <strong>Important Announcement:</strong> Only admins can post announcements.
                </div>
            </div>



            <style>
                /* Custom CSS */
                .posts-container {
                    margin-bottom: 20px;
                }
            </style>

            <div class="col-md-8">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Create Post</h5>
                        <form id="postForm">
                            <div class="mb-3">
                                <label for="title" class="form-label">Title:</label>
                                <input type="text" class="form-control" id="title"
                                    placeholder="The name of your flora item." name="title">
                            </div>
                            <div class="mb-3">
                                <label for="image" class="form-label">Upload Image:</label>
                                <input type="file" class="form-control" id="image" name="image" accept="image/*"
                                    required>
                            </div>
                            <div class="mb-3">
                                <label for="description" class="form-label">Description:</label>
                                <textarea class="form-control" id="description" name="description"
                                    placeholder="Kindly give a detailed description about your flora item."
                                    rows="4"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Share <i class="bi bi-send" width="16"
                                    height="16"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mt-5">
            <div class="row">
                <div class="row">
                    <h2>Your Posts</h2>
                    <div id="postList"></div>
                </div>
            </div>
        </div>

    </div>


    <script>
        // Function to handle form submission
        document.getElementById("postForm").addEventListener("submit", function (event) {
            event.preventDefault(); // Prevent default form submission

            // Get form values
            var title = document.getElementById("title").value;
            var image = document.getElementById("image").files[0];
            var description = document.getElementById("description").value;

            // Read the image file as a base64 encoded string
            var reader = new FileReader();
            reader.onload = function (event) {
                var imageData = event.target.result;

                // Check if the post already exists in local storage
                var posts = JSON.parse(localStorage.getItem("posts")) || [];
                var existingPost = posts.find(function (post) {
                    return post.title === title && post.description === description && post.image === imageData;
                });

                // If the post doesn't already exist and image data is available, add it
                if (!existingPost && imageData) {
                    var post = {
                        title: title,
                        description: description,
                        image: imageData
                    };

                    // Create new post element
                    var postElement = createPostElement(post);

                    // Append post to post list
                    document.getElementById("postList").appendChild(postElement);

                    // Save post data to local storage
                    posts.push(post);
                    localStorage.setItem("posts", JSON.stringify(posts));
                }
            };
            // Check if image is selected
            if (image) {
                reader.readAsDataURL(image);
            }
        });

        // Function to create post element
        function createPostElement(post) {
            var postElement = document.createElement("div");
            postElement.classList.add("card", "mb-3");
            postElement.innerHTML = `
        <div class="card-header">
            <div class="d-flex justify-content-between align-items-center">
                <h5 class="card-title"><b>${post.title}</b></h5>
                <button type="button" class="btn btn-sm btn-danger" onclick="deletePost(this)">Delete</button>
            </div>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p class="card-text">${post.description}</p>
                </div>
                <div class="col-md-6">
                    <img src="${post.image}" class="card-img-top" alt="Post Image" style="width: 200px; height: auto;">
                </div>
            </div>
        </div>
    `;
            return postElement;
        }

        // Function to load posts from local storage
        function loadPosts() {
            var posts = JSON.parse(localStorage.getItem("posts")) || [];
            posts.forEach(function (post) {
                // Check if image data is available
                if (post.image) {
                    var postElement = createPostElement(post);
                    document.getElementById("postList").appendChild(postElement);
                }
            });
        }

        // Load posts when the page is loaded
        window.addEventListener("load", function () {
            loadPosts();
        });


    </script>

























    <script>
        // function for the images that will be uploaded
        function checkImageSize(input) {
            // Get the uploaded file
            var file = input.files[0];

            // Check if a file is selected
            if (file) {
                // Set maximum allowed size in bytes (e.g., 500 KB)
                var maxSize = 900 * 1024; // 500 KB

                // Check if file size exceeds the maximum allowed size
                if (file.size > maxSize) {
                    // Reset the file input and alert the user
                    input.value = '';
                    alert('Please upload an image smaller than 500 KB.');
                }
            }
        }
    </script>


    <script>
       

        // function for the delete button 
        function deletePost(button) {
            // Find the closest ancestor element with the class 'card' relative to the button
            var card = button.closest('.card');

            // Retrieve the ID of the post from a data attribute or any other means
            var postId = card.dataset.postId;

            // Display a confirmation dialog to the user
            var confirmation = confirm('Are you sure you want to delete this post?');

            // If the user confirms the deletion
            if (confirmation) {
                // Remove the 'card' element from the DOM
                card.parentNode.removeChild(card);

                // Remove the specific post from local storage
                var posts = JSON.parse(localStorage.getItem('posts')) || [];
                var index = posts.findIndex(function (post) {
                    return post.id === postId;
                });
                if (index !== -1) {
                    posts.splice(index, 1);
                    localStorage.setItem('posts', JSON.stringify(posts));
                }
            }
        }



    </script>


    <script>
        // ----------changing the theme of the page---------
        // Function to toggle dark mode
        function toggleDarkMode() {
            const body = document.body;
            const darkModeToggleIcon = document.getElementById('dark-mode-toggle');

            // Toggle dark mode class on body
            body.classList.toggle('dark-mode');

            // Toggle moon icon class based on dark mode state
            if (body.classList.contains('dark-mode')) {
                darkModeToggleIcon.classList.remove('bi-moon');
                darkModeToggleIcon.classList.add('bi-moon-fill');
            } else {
                darkModeToggleIcon.classList.remove('bi-moon-fill');
                darkModeToggleIcon.classList.add('bi-moon');
            }

            // Store the dark mode preference in local storage
            const isDarkMode = body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Event listener for dark mode toggle button
        document.getElementById('dark-mode-toggle').addEventListener('click', toggleDarkMode);

        // Check local storage for dark mode preference on page load
        document.addEventListener('DOMContentLoaded', function () {
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            const darkModeToggleIcon = document.getElementById('dark-mode-toggle');

            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                darkModeToggleIcon.classList.remove('bi-moon');
                darkModeToggleIcon.classList.add('bi-moon-fill');
            } else {
                darkModeToggleIcon.classList.remove('bi-moon-fill');
                darkModeToggleIcon.classList.add('bi-moon');
            }
        });
    </script>


    <!-- translator -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({ pageLanguage: 'en' }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript"
        src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>





    <i>
        <footer class="footer-section container-fluid text-light" style="margin-top: 5%;">
            <div class="row">
                <div class="footer-head col-md-3">
                    <img src="./images/agro_g.png" style="padding-top: 50px; width: 100px;"
                        class="kayybites_footer_logo" alt="Logo">

                    <div class="list-unstyled-container">
                        <p style="color: black; font-size: small;"><br>
                            Your go-to destination for hassle-free horticulture. Explore our user-friendly platform
                            offering a wide selection of fruits, flowers, and vegetables, complete with easy-to-use
                            control mechanisms. Discover the perfect plants for every season. Join us and simplify your
                            farming journey with AgroG.</p>
                    </div>
                </div>

                <div class="footer-head col-md-3">
                    <h5><b>Quick Links</b></h5>
                    <ul class="list-unstyled">
                        <li><a href="home.html">Home</a></li>
                        <li><a href="product.html">Flora</a></li>
                        <li><a href="weather forecast.html">Weather Forecast</a></li>
                        <li><a href="community forum.html">Community Forum</a></li>
                    </ul>
                </div>
                <div class="footer-head col-md-3">
                    <h5><b>Personalized</b></h5>
                    <ul class="list-unstyled">
                        <li><a href="contact.html">My Account</a></li>
                        <li><a href="contact.html">Terms And Conditions</a></li>
                        <li><a href="contact.html">Privacy Policy</a></li>
                        <li><a href="index.html">Sign out</a></li>
                    </ul>
                </div>
                <div class="footer-head col-md-3">
                    <h5><b>Socials</b></h5>
                    <div class="list-unstyled-container">
                        <p class="small-text" style="color: black;">Follow us for more updates</p>
                        <a href=""><i class="bi bi-instagram  instagram" style="font-size: 20px;"></i></a>
                        <a href=""><i class="bi bi-twitter twitter" style="font-size: 20px;"></i></a>
                        <a href=""><i class="bi bi-facebook facebook" style="font-size: 20px;"></i></a>
                        <a href=""><i class="bi bi-youtube youtube" style="font-size: 20px;"></i></a>
                    </div>
                </div>
            </div>
        </footer>
    </i>



</body>

</html>